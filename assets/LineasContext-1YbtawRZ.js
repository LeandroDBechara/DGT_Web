import{r as a,j as L}from"./ButtomBar-BlCFZZyj.js";const E=a.createContext();function b(m){const[o,i]=a.useState([]),[s,c]=a.useState(""),[d,f]=a.useState();var u=[];let r=document.getElementById("busca");a.useEffect(()=>{l()},[]);async function l(){try{const t=await(await fetch("http://localhost:4000/lineas")).json();i(t)}catch{const t=new URL("https://LeandroDBechara.github.io/DGT_Web/Jsons/Lineas.json"),p=await(await fetch(t)).json();i(p)}}function h(e){c(e.target.value),e.target.value===""?r.style.borderRadius="30px 30px 30px 30px":r.style.borderRadius="30px 30px 4px 4px"}function x(e){{f(e.target.value);const t=document.getElementById("mapa1");t.style.display="block",c(""),r.style.borderRadius="30px 30px 30px 30px"}}async function g(e){e.preventDefault();const t=e.target.nombreL.value,n=e.target.mapa.value;t&&n&&((await fetch("http://localhost:4000/agregarlinea",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({linea:t,mapa:n})})).ok?(l(),console.log("Elemento insertado exitosamente"),document.getElementById("nombreL").value="",document.getElementById("mapa").value=""):console.error("Error al insertar el elemento"))}async function y(e){let t=e.target.value;e&&((await fetch(`http://localhost:4000/eliminarlinea/${t}`,{method:"DELETE"})).ok?(l(),console.log("Elemento eliminado exitosamente")):console.error("Error al eliminar el elemento"))}return s===""||(u=s?o.filter(e=>e.linea.toLowerCase().includes(s.toLocaleLowerCase())):o),L.jsx(E.Provider,{value:{searcher:h,maper:x,results:u,mapa:d,search:s,crearLinea:g,lineas:o,eliminarLinea:y},children:m.children})}export{E as L,b as a};
