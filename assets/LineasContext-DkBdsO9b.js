import{r as s,j as y}from"./ButtomBar-BlCFZZyj.js";const L=s.createContext();function b(u){const[o,i]=s.useState([]),[n,c]=s.useState(""),[m,d]=s.useState();var p=[];let r=document.getElementById("busca");s.useEffect(()=>{l()},[]);async function l(){try{const t=await(await fetch("http://localhost:4000/lineas")).json();i(t)}catch{const a=await(await fetch("https://raw.githubusercontent.com/LeandroDBechara/DGT_Web/gh-pages/Jsons/Lineas.json")).json();i(a)}}function h(e){c(e.target.value),e.target.value===""?r.style.borderRadius="30px 30px 30px 30px":r.style.borderRadius="30px 30px 4px 4px"}function f(e){{d(e.target.value);const t=document.getElementById("mapa1");t.style.display="block",c(""),r.style.borderRadius="30px 30px 30px 30px"}}async function x(e){e.preventDefault();const t=e.target.nombreL.value,a=e.target.mapa.value;t&&a&&((await fetch("http://localhost:4000/agregarlinea",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({linea:t,mapa:a})})).ok?(l(),console.log("Elemento insertado exitosamente"),document.getElementById("nombreL").value="",document.getElementById("mapa").value=""):console.error("Error al insertar el elemento"))}async function g(e){let t=e.target.value;e&&((await fetch(`http://localhost:4000/eliminarlinea/${t}`,{method:"DELETE"})).ok?(l(),console.log("Elemento eliminado exitosamente")):console.error("Error al eliminar el elemento"))}return n===""||(p=n?o.filter(e=>e.linea.toLowerCase().includes(n.toLocaleLowerCase())):o),y.jsx(L.Provider,{value:{searcher:h,maper:f,results:p,mapa:m,search:n,crearLinea:x,lineas:o,eliminarLinea:g},children:u.children})}export{L,b as a};
