import{r as s,j as y}from"./ButtomBar-BlCFZZyj.js";const E=s.createContext();function b(p){const[o,i]=s.useState([]),[n,c]=s.useState(""),[u,d]=s.useState();var m=[];let r=document.getElementById("busca");s.useEffect(()=>{l()},[]);async function l(){try{const t=await(await fetch("http://localhost:4000/lineas")).json();i(t)}catch{const a=await(await fetch("/Jsons/Lineas.json")).json();i(a)}}function f(e){c(e.target.value),e.target.value===""?r.style.borderRadius="30px 30px 30px 30px":r.style.borderRadius="30px 30px 4px 4px"}function x(e){{d(e.target.value);const t=document.getElementById("mapa1");t.style.display="block",c(""),r.style.borderRadius="30px 30px 30px 30px"}}async function h(e){e.preventDefault();const t=e.target.nombreL.value,a=e.target.mapa.value;t&&a&&((await fetch("http://localhost:4000/agregarlinea",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({linea:t,mapa:a})})).ok?(l(),console.log("Elemento insertado exitosamente"),document.getElementById("nombreL").value="",document.getElementById("mapa").value=""):console.error("Error al insertar el elemento"))}async function g(e){let t=e.target.value;e&&((await fetch(`http://localhost:4000/eliminarlinea/${t}`,{method:"DELETE"})).ok?(l(),console.log("Elemento eliminado exitosamente")):console.error("Error al eliminar el elemento"))}return n===""||(m=n?o.filter(e=>e.linea.toLowerCase().includes(n.toLocaleLowerCase())):o),y.jsx(E.Provider,{value:{searcher:f,maper:x,results:m,mapa:u,search:n,crearLinea:h,lineas:o,eliminarLinea:g},children:p.children})}export{E as L,b as a};
